# 章节驱动的文档生成与标签管理规范

本规范以“章节名称→规则”的形式精确约束生成内容：当文档中出现与下述章节名称完全一致的标题时，必须强制应用对应章节下的规则。若无该章节，则忽略其规则。

## 总体工作流（章节无关）
1. 通读下方“标签tags列表/分类cats列表”。
2. 根据文章主题从列表中选择标签与分类；尽量覆盖内容要点，先解释理由再使用。
3. 如需列表外新标签：先征得站点维护者同意 → 将新标签加入本 README 对应列表 → 再在文档中使用。

## 章节→强制规则映射表

### Front Matter
- 必须包含字段：`title`,`date`,`summary`,`tags`,`categories`.
- `tags` 与 `categories` 只能来自“标签tags列表/分类cats列表”。
- 推荐包含：`weight`（排序需要时）、`draft`（草稿时设为 true）。
- 模板：
```yaml
---
title: "示例标题"
date: 2025-09-30
summary: "一句话或一段话概述本文的核心内容。"
tags: ["MAVLink", "QGroundControl", "无人机"]
categories: ["技术文档"]
weight: 10
draft: false
---
```

### 标题与摘要
- **标题编号要求（强制）**：文档中的二级标题（##）和三级标题（###）必须使用编号格式。
  - 二级标题格式：`## 1. 标题名称`、`## 2. 标题名称` 等
  - 三级标题格式：`### 1.1 标题名称`、`### 1.2 标题名称`、`### 2.1 标题名称` 等
  - 编号从 1 开始，按顺序递增；三级标题的编号格式为 `父级编号.子级编号`
- `title` 应准确、简洁，避免堆砌关键词。
- `summary` 用 1-2 句概述核心价值与读者收益，避免平台或技术限定（除非文章本身就是专项）。

### 标签与分类
- 仅可从“标签tags列表/分类cats列表”中选择；禁止私自新增或拼写变体。
- 优先选择通用与主轴类标签（如：`无人机`、`地面站`、`前端`）。
- 如需新标签，按“总体工作流”第 3 步执行。

### 图片与资源路径
- Markdown 图片路径必须使用绝对路径，格式为 `/Docsy/images/`（不能直接使用 `/Docsy`）；含空格文件名需 URL 编码，且建议避免空格。
- 资源文件放入站点 `static/` 下合适目录，并以绝对路径引用。

### 语言与本地化
- 中文文档避免在模板/布局中硬编码中文常量；统一使用本地化键值或变量。
- 模板通用文件（如 `list.html`）需通过 i18n 变量提供语言化内容。

### 代码块与命令
- **围栏代码块格式要求（强制）**：所有使用 ``` 组成的围栏代码块必须明确标注语言类型。
  - 如果是 bash 命令，必须使用 ```bash（严禁仅使用 ```）。
  - 如果是其他语言（如 Python、JavaScript、YAML 等），同样必须标注对应语言（如 ```python、```javascript、```yaml, `bash` 用于可执行命令，`text` 用于纯文本内容）。
  - **严禁使用没有语言标注的 ``` 围栏代码块结构**。
- 示例命令提供跨平台差异时的注释或替代方案。
- 避免加入需要交互输入的命令；若不可避免，明确说明非交互参数。

### 文本格式与突出显示
- **交互元素与突出显示（强制）**：按钮、菜单项、标签页、选项等交互类元素或需要突出显示的文本，必须使用反引号（`` ` ``）来突出显示，禁止使用双引号（`"`）。
  - 正确示例：点击 `Open In Browser` 按钮，选择 `Project` 分页，点击 `创建项目` 按钮
  - 错误示例：点击 "Open In Browser" 按钮、选择 "Project" 分页、点击 "创建项目" 按钮
- 反引号也用于突出显示文件名、路径、配置项名称、技术术语等需要强调的文本。
- 详细的符号使用规范请参见下方"符号使用规范"章节。

### 符号使用规范
- **总体原则**：
  - 符号是文本的组成部分，必须正确使用，不能混用或误用。
  - 中文标点符号（，。、；：等）和英文标点符号（, . ; : 等）不能互相替代。
  - Markdown 语法标记（如反引号、加粗标记）不是标点符号，不能替代标点符号使用。

- **反引号（`` ` ``）使用规范（强制）**：
  - **正确用途**：反引号用于创建行内代码高亮，仅用于标记以下内容：
    - 代码片段：`const x = 1;`
    - 命令名称：`hugo server`, `git commit`
    - 文件名和路径：`config.yaml`, `/Docsy/images/logo.png`
    - 配置项名称：`title`, `tags`, `categories`
    - 技术术语：`MAVLink`, `QGroundControl`
    - 交互元素：`Open In Browser` 按钮, `Project` 分页
  - **禁止用法**：
    - ❌ **严禁使用反引号替代标点符号**（如逗号、句号、顿号等）
    - ❌ **严禁在反引号后使用中文顿号（、）**：反引号后使用顿号会导致显示异常，应使用逗号（，）或英文逗号（,）替代
    - ❌ 反引号不能作为普通文本的标点符号使用
    - ❌ 反引号必须成对出现，且中间包含需要高亮的内容
  - **正确示例**：
    - 这是一个示例，展示了正确的用法。你可以使用 `hugo server` 命令启动服务器，然后查看效果。
    - 在 `config.yaml` 文件中，设置 `title` 和 `tags` 字段，保存后重新构建。
    - 点击 `Open In Browser` 按钮，选择 `Project` 分页，然后查看结果。
    - 命令名称：`hugo server`, `git commit`
    - 配置项名称：`title`, `tags`, `categories`
  - **错误示例**（禁止）：
    - ❌ 这是一个示例`展示了错误的用法（反引号替代了逗号）
    - ❌ 你可以使用 `hugo server` 命令启动服务器`然后查看效果（反引号替代了逗号）
    - ❌ 在 `config.yaml` 文件中`设置 `title` 字段`保存后重新构建（反引号替代了逗号）
    - ❌ 命令名称：`hugo server`、`git commit`（反引号后不能使用中文顿号）
    - ❌ 配置项名称：`title`、`tags`、`categories`（反引号后不能使用中文顿号）

- **加粗（`**...**`）使用规范（强制）**：
  - **正确用法**：用于强调一段完整的词组或术语
    - 正确示例：**动捕系统**，**伴随计算机**，**飞控**
    - 当需要列举多个加粗项时，应使用逗号（，）或英文逗号（,）分隔，加粗范围只包裹具体词语本身，而不包裹标点
  - **禁止用法**：
    - ❌ 在加粗标记之后直接使用中文顿号连接多个加粗短语
    - ❌ 错误示例：**动捕系统**、**伴随计算机**、**飞控**

- **顿号与逗号使用规范（强制）**：
  - **中文顿号（、）的使用限制**：
    - ❌ **禁止在反引号后使用中文顿号**：当需要列举多个用反引号标记的项时，应使用逗号（，）或英文逗号（,）分隔，不能使用顿号（、），否则会导致显示异常
    - ❌ **禁止在加粗标记后使用中文顿号**：当需要列举多个加粗项时，应使用逗号（，）或英文逗号（,）分隔
    - ❌ **禁止在英文字母、缩写词或英文术语之间使用中文顿号**
  - **英文字母之间禁止使用中文顿号（强制）**：
    - **规则**：当分隔英文字母、缩写词或英文术语时，必须使用英文逗号（`,`），禁止使用中文顿号（`、`）。
    - 正确示例：`ABC, DEF`, `MAVLink, QGroundControl`, `X, Y, Z`
    - 错误示例：`ABC、DEF`, `MAVLink、QGroundControl`, `X、Y、Z`
    - **适用范围**：所有包含英文字母、缩写词或英文术语的列举场景。

- **Mermaid 图表中的双引号（例外规则）**：
  - **在 Mermaid 图表（```mermaid 代码块）中，双引号（`"`）不需要转换成反引号**。
  - Mermaid 语法使用双引号来标识节点标签、文本内容等，这是 Mermaid 的标准语法，必须保持原样。
  - 正确示例：`User->>+UI: 按下"发送语音"按钮`（在 Mermaid 图中）
  - 错误示例：`User->>+UI: 按下`发送语音`按钮`（在 Mermaid 图中不应使用反引号）
  - **注意**：此例外仅适用于 Mermaid 图表代码块内部，普通 Markdown 正文中的交互元素仍需使用反引号。

- **符号使用快速参考**：
  - 反引号后列举项：使用逗号（，）或英文逗号（,），禁止使用顿号（、）
  - 加粗后列举项：使用逗号（，）或英文逗号（,），禁止使用顿号（、）
  - 英文字母/术语列举：使用英文逗号（,），禁止使用顿号（、）
  - 反引号不能替代任何标点符号
  - Mermaid 图表中保持双引号原样

### 参考文档/参考资料
- 章节标题必须为：`参考文档`（不得包含数字编号）。如果标题为`参考资料`，需要改成`参考文档`
- 展示格式：每行一个 Markdown 链接条目，如 `- [文档名称](文档链接)`。
- 在"参考文档"标题上方两行增加分隔符`---`。
- **论坛链接命名规则（强制）**：如果参考文档链接来自论坛（如巴哈姆特、Reddit、Stack Overflow 等），必须访问对应地址获取帖子或文章的具体标题，并使用该标题作为链接描述，禁止使用"XX论坛"、"XX社区"等通用描述。
  - 正确示例：`- [【情報】推薦一個可下載各版本Windows安裝映像檔(ISO檔)的網站](https://forum.gamer.com.tw/C.php?bsn=60030&snA=666363)`
  - 错误示例：`- 巴哈姆特论坛：https://forum.gamer.com.tw/C.php?bsn=60030&snA=666363`
  - 获取方法：使用 `curl` 命令访问链接，从 HTML 的 `<title>` 标签中提取帖子标题，或直接访问链接查看页面标题。

### 名称与大小写校验
- 文中技术名词应使用标准大小写；若出现非标准写法，需提醒并确认是否修正或扩充“标准名称列表”。
- 当前标准名称列表如下：
  - MAVSDK-Python
  - AirSim
  - MAVLink
  - MAVProxy

### 文件命名与 slug
- 文件名必须使用英文 ASCII，保持简洁；禁止空格与特殊字符；禁止中文。
- 推荐使用英文小写-kebab-case 命名（仅 ASCII，使用 `-` 连接，禁止空格）。

### 日期与权重
- `date` 使用文档首发日期；需要列表排序时使用 `weight`，数值越小越靠前。

### 图表分析
- **格式要求（强制）**：当文档中包含图表分析内容时，必须遵循以下标准化格式结构：
  - **图表含义**：
    - **横轴**：描述横轴的含义，包括单位、范围等信息
    - **纵轴**：描述纵轴的含义，包括单位、范围等信息
    - **数据系列**：描述图表中的各个数据系列，包括：
      - 颜色/样式标识（如：**蓝色线**、**橙色线**）
      - 数据源名称（使用反引号标记，如：`estimator_local_position`、`vehicle_local_position`）
      - 每个系列的含义和解释
    - **关键标记**：图表上标注的重要时间点、阈值或注释信息
  - **分析**：
    - **数据观察**：按以下方式组织详细观察：
      - 时间阶段（使用加粗标记，如：**0-14秒**、**14秒起**、**35-45秒**、**45秒后**）
      - 不同轴或维度（如：**X 轴位置对比**、**Y 轴位置对比**、**Z 轴位置对比**）
      - 每个阶段观察到的具体现象
    - **关键发现**：重要洞察和模式发现：
      - 异常或例外情况
      - 不同数据系列之间的对比
      - 不同轴或维度之间的关系
      - 关键时间阶段或事件
    - **结论验证**：
      - 图表分析如何与前文分析或结论形成闭环
      - 因果关系或逻辑链条
      - 对系统行为或问题诊断的启示
  - **格式规范**：
    - 使用嵌套列表结构，保持适当的缩进
    - 重要术语、时间阶段和关键概念使用**加粗**标记
    - 代码或技术术语使用反引号（如：`test_ratio`、`EKF2_EV_POS_X`）
    - 使用时间范围标记（如：0-14秒、14秒起）清晰标注不同的分析阶段
    - 使用箭头（→）表示因果关系或逻辑序列
  - **参考示例**：参见 `content/cn/blog/MAVLink & FCU/analyse-ulog-with-python.md`（第 459-491 行）获取完整的图表分析格式示例。

### 审核要点（给维护者）
- 新增标签是否必要且通用？能否用现有标签替代？
- 标签命名是否规范、简洁、大小写正确（如：`MAVSDK-Python`、`MAVLink`）？
- 同类文档之间的标签是否保持一致性？

## 标签与分类（唯一来源）

### 有效的标签tags列表
- 数据分析
- Gazebo
- 飞控
- 通信
- FastDDS
- ROS
- ROS 2
- 实用工具
- AirSim
- CMake
- MAVLink
- MAVLink Router
- MAVProxy
- MAVROS
- MAVSDK
- MAVSDK-Python
- Linux
- lua
- 二次开发
- Ubuntu
- Android
- QGroundControl
- NiceGUI
- JavaScript
- Leaflet
- 无人机
- 地面站
- Python
- 前端
- 任务规划
- 容器化
- 编译
- Docker
- C++
- Qt
- pymavlink
- 大模型
- 仿真
- PX4
- WSL2
- Windows
- RPC
- SITL
- 后端


### 有效的分类cats列表
- 技术文档
- 踩坑记录
- 学习笔记
- 游戏插件

## 使用说明（如何让章节规则生效）
- 当你的文档章节名与本 README 中某一“章节→强制规则映射表”的标题完全一致时，生成与审校流程必须严格执行该章节下的所有规则。
- 若你的文档中未包含对应章节，则该章节的规则不触发，不作强制要求。

## 快速校验清单
- Front Matter 字段齐全、来源合规（tags/categories）。
- 标题与摘要准确、非堆砌。
- 图片路径必须为 `/Docsy/images/` 格式（不能直接使用 `/Docsy`），URL 编码到位。
- 名称大小写符合"标准名称列表"。
- 参考文档章节命名与格式正确且有分隔符。
- 交互元素（按钮、菜单项等）使用反引号突出显示，而非双引号。
- 英文字母之间使用英文逗号分隔，禁止使用中文顿号（如：`ABC, DEF` 而非 `ABC、DEF`）。
- 图表分析内容遵循标准格式结构（图表含义、分析等）。
