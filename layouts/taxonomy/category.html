{{ define "main" }}
<style>
/* 为博客分类页面设置背景 */
body {
    background-image: url('/Docsy/images/blog/blog_background.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
}
</style>
<div class="td-content">
  {{ if .IsHome }}
    <!-- 分类列表页面 -->
    <h1>{{ i18n "ui_all_categories" | default "All Categories" }}</h1>
    
    {{ if .Content }}
    <div class="lead">
      {{ .Content }}
    </div>
    {{ end }}

    <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">{{ i18n "ui_all_categories" | default "All Categories" }}</h5>
      <ul class="taxonomy-terms">
        {{ range .Data.Terms.ByCount }}
          <li><a class="taxonomy-term" href="{{ .Page.RelPermalink }}" data-taxonomy-term="{{ .Page.Title }}"><span class="taxonomy-label">{{ .Page.Title }}</span><span class="taxonomy-count">{{ .Count }}</span></a></li>
        {{ end }}
      </ul>
    </div>
  {{ else }}
    <!-- 单个分类页面 -->
    <h1>{{ i18n "categories" | default "Categories" }}: {{ .Title }}</h1>
    
    {{ if .Content }}
    <div class="lead">
      {{ .Content }}
    </div>
    {{ end }}

    <div class="blog-posts mt-4">
      {{ $paginator := .Paginate .Pages }}
      {{ if gt (len $paginator.Pages) 0 }}
        {{ range $paginator.Pages }}
          <article class="blog-post-item mb-4">
            <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            <div class="blog-post-meta text-muted mb-2">
              <time datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ i18n "last_updated" | default "Updated" }} {{ .Lastmod.Format "2006-01-02" }}</time>
              {{ if .Params.categories }}
                {{ range .Params.categories }}
                  <span class="badge bg-primary ms-2">{{ . }}</span>
                {{ end }}
              {{ end }}
              {{ if .Params.tags }}
                {{ range first 3 .Params.tags }}
                  <span class="badge bg-secondary ms-1">{{ . }}</span>
                {{ end }}
              {{ end }}
            </div>
            <p>
              {{ if .Params.summary }}
                {{ .Params.summary }}
              {{ else if .Params.description }}
                {{ .Params.description }}
              {{ else }}
                {{ .Summary }}
              {{ end }}
            </p>
          </article>
        {{ end }}

        {{ template "_internal/pagination.html" . }}
      {{ else }}
        <p>{{ i18n "no_posts_found" | default "No posts found" }}</p>
      {{ end }}
    </div>
  {{ end }}
</div>
<script defer src="{{ .Site.BaseURL }}js/custom-scrollbar.js"></script>
<script defer src="{{ .Site.BaseURL }}js/taxonomy-collapse.js"></script>
{{ end }}
